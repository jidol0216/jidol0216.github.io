---
title: "MG90S 서보 + ESP32 전원 문제 해결"
collection: arduino
type: "Troubleshooting"
permalink: /arduino/2025-12-15-mg90s-esp32-power-debug/
date: 2025-12-15
excerpt: "MG90S 서보와 ESP32 전원 문제(스톨, 과열, 전압강하) 원인 분석과 재발 방지 가이드"
---

# 📓 서보(MG90S) + ESP32 전원 삽질 복기 기록

## 📅 날짜

- 2025-12-15

---

### 🎯 원래 목표

- ESP32로 **MG90S 서보**를 제어해서
- **약 5mm 스트로크**를
- **3초마다 반복**
- 레이저(KY-008) ON/OFF도 함께 제어

---

### 🧨 발생한 문제 요약

- 서보가 **틱틱 / 드르륵** 소리 남
- 서보가 **뜨거워짐**
- 잘 되다가 갑자기 **동작 멈춤**
- ESP32가 **GND 연결 순간 꺼짐**
- 노트북 USB 연결 시 **쇼트 난 것처럼 동작**
- 서보 여러 개 **빠르게 사망**

---

### ❌ 잘못된 구성 (문제의 핵심)

1. **ESP32 VCC(5V)로 서보 전원 공급**

- ESP32 보드의 VCC는 **외부 모터 전원용이 아님**
- 서보가 움직일 때 **500mA 이상 순간 전류** 발생
- ESP32 전원 레일이 이를 감당 못 함

2. **전원 불안정 + 얇은 선**

- 얇은 점퍼선 사용
- 전류 피크 시 **전압 강하 발생**

3. **과도한 각도 & 반복 테스트**

- 20° ↔ 160° 왕복
- 쉬는 시간 거의 없음
- 기계적으로 끝단에 닿거나 막힘

---

### 🔥 실제로 서보가 죽은 메커니즘

1. 서보가 움직이려다 **500mA 이상 전류 튐**
2. ESP32 VCC 전압이 **뚝 떨어짐**
3. 전압 저하 → 서보 **토크 부족**
4. 서보가 목표 각도에 도달 못 함
5. 서보 내부 제어가 **전류를 더 요구**
6. 전압은 더 떨어짐
7. **스톨(stall) 상태 진입**
8. 스톨 상태에서 **최대 전류 + 과열**
9. 내부 드라이버/모터 손상 → **서보 사망**

**📌 결론:** 전압이 불안정한 상태에서 스톨이 오래 유지되면 서보는 빠르게 고장난다.

---

### 🔊 스톨(stall) 상태란?

- 서보가 **돌려고는 하지만 물리적으로 못 도는 상태**
- 회전은 0인데 전류는 **최대**
- 짧은 시간에도 서보가 빠르게 망가짐

**징후:** 틱틱/드르륵, 각도 바꿔도 계속 힘 주는 느낌, 빠른 발열

---

### ✅ 해결 방향 (정답 구조)

#### 전원 분리

- **서보 & 레이저 전원**
  - 보조배터리
  - USB A Female Breakout 사용
- **ESP32 전원**
  - USB (같은 보조배터리여도 OK)
- **+5V 라인은 절대 합치지 않음**
- **GND만 공통**

```
보조배터리
├─ USB → ESP32 (전원)
└─ USB A Female Breakout
   ├─ VCC → 서보 VCC, 레이저 VCC
   └─ GND → 서보 GND, 레이저 GND, ESP32 GND
```

---

### ⚙️ 서보 보호 규칙 (절대 규칙)

1. ESP32 VCC로 서보 전원 ❌
2. 첫 테스트는 **혼 제거 상태**
3. 각도는 **90 ± 10~15°**부터 시작
4. 틱/드르륵 소리 나면 **즉시 전원 OFF**
5. 반복 동작 사이 **충분한 휴식**
6. 전원은 **안정적인 5V**

---

### 📐 현재 설계 파라미터

- 서보: MG90S
- 혼 길이: **12mm**
- 목표 스트로크: 약 **5mm**
- 제어 각도: 약 **±12° 내외 (안전 범위)**

---

### 🧠 오늘의 핵심 교훈

> ❌ 전류를 약하게 주면 안전하다 → 틀림

> ❌ 3.3V 신호 때문에 서보가 죽었다 → 틀림

> ✅ **전압이 무너진 상태에서 스톨을 오래 유지하면 서보는 반드시 죽는다**

> ESP32의 VCC는 전원 출력이 아니라 전원 통로다. 거기서 모터를 먹이면 누군가는 죽는다.

---

### 🔜 다음 액션

- 새 MG90S 도착 시:
  - 혼 제거 상태로 첫 테스트
  - 안전 각도 코드 적용
- 필요 시: 더 튼튼한 서보 모델 검토

---

본 로그를 `/arduino/` 컬렉션에 저장했습니다. 추가로 이 내용을 `README`나 튜토리얼 형식으로 정리해 드릴까요?
